# 하이퍼파라미터 조합 실험 계획

## 현재 기준 성능
- **백본**: ResNet18
- **F1 Score**: 0.851
- **이미지 해상도**: 832×832
- **배치 크기**: 16
- **학습률**: 0.001 (AdamW)

## 실험 목표
1. **학습률 최적화**로 성능 향상
2. **배치 크기** 및 **이미지 해상도** 조합 탐구
3. **정규화 기법** 조합 실험
4. **데이터 증강** 강도 조절

## 실험 범주

### 1. 학습률 스케줄링 실험
#### 현재: CosineAnnealingLR
#### 대안들:
- **OneCycleLR**: 더 빠른 수렴
- **ReduceLROnPlateau**: 적응적 학습률 감소
- **MultiStepLR**: 단계적 학습률 감소
- **ExponentialLR**: 지수적 감소

### 2. 학습률 값 실험
#### 현재: 0.001
#### 실험 범위:
- **0.0005**: 더 안정적인 훈련
- **0.002**: 더 빠른 학습
- **0.0008**: 중간값
- **0.0003**: 보수적 접근

### 3. 배치 크기 실험
#### 현재: 16
#### 실험 범위:
- **8**: 작은 배치 (더 많은 업데이트)
- **24**: 중간 배치
- **32**: 큰 배치 (더 안정적인 그래디언트)

### 4. 이미지 해상도 실험
#### 현재: 832×832
#### 실험 범위:
- **640×640**: 기존 기준 해상도
- **896×896**: 더 높은 해상도
- **1024×1024**: 최고 해상도 (메모리 허용 시)

### 5. 정규화 조합 실험
#### Weight Decay 실험:
- **1e-4**: 현재 값
- **5e-5**: 더 약한 정규화
- **2e-4**: 더 강한 정규화
- **1e-5**: 매우 약한 정규화

#### Dropout 추가:
- **0.1**: 경미한 드롭아웃
- **0.2**: 중간 드롭아웃
- **0.0**: 드롭아웃 없음 (현재)

### 6. 데이터 증강 강도 실험
#### 현재 증강:
```yaml
- ColorJitter: brightness=0.2, contrast=0.2, saturation=0.2, hue=0.1
- GaussianBlur: blur_limit=(3, 7), p=0.3
- GaussNoise: var_limit=(10, 50), p=0.3
```

#### 실험 변형:
- **강한 증강**: 모든 확률과 강도 1.5배 증가
- **약한 증강**: 모든 확률과 강도 0.7배 감소
- **회전 추가**: RandomRotate90, Rotate 추가
- **기하학적 증강**: ShiftScaleRotate, Perspective 추가

## 우선순위 실험 조합

### Phase 1: 학습률 최적화 (4개 실험)
1. **OneCycleLR + lr=0.002**: 빠른 수렴 시도
2. **OneCycleLR + lr=0.001**: 현재 학습률로 스케줄러 변경
3. **ReduceLROnPlateau + lr=0.001**: 적응적 접근
4. **CosineAnnealing + lr=0.0005**: 더 안정적인 학습

### Phase 2: 해상도와 배치 크기 (4개 실험)
5. **896×896 + batch=12**: 고해상도 + 적절한 배치
6. **640×640 + batch=24**: 기본 해상도 + 큰 배치
7. **832×832 + batch=8**: 현재 해상도 + 작은 배치
8. **896×896 + batch=8**: 고해상도 + 작은 배치

### Phase 3: 정규화 조합 (4개 실험)
9. **weight_decay=2e-4 + dropout=0.1**: 강한 정규화
10. **weight_decay=5e-5 + dropout=0.0**: 약한 정규화
11. **weight_decay=1e-4 + dropout=0.2**: 중간 정규화
12. **weight_decay=1e-5 + dropout=0.0**: 최소 정규화

### Phase 4: 데이터 증강 (4개 실험)
13. **강한 증강**: 기존 증강 1.5배 강화
14. **기하학적 증강**: 회전, 변형 추가
15. **약한 증강**: 기존 증강 0.7배 감소
16. **최소 증강**: 기본 증강만 유지

## 실험 설정

### 공통 설정
- **훈련 에포크**: 15-20 에포크 (빠른 실험)
- **백본**: ResNet18 (기준 모델)
- **옵티마이저**: AdamW (고정)
- **평가 지표**: F1 Score (주요)

### 성공 기준
- **기본 목표**: F1 > 0.860 (현재 대비 +1%)
- **우수 목표**: F1 > 0.870 (현재 대비 +2%)
- **최고 목표**: F1 > 0.880 (현재 대비 +3%)

## 예상 일정
- **각 실험당 시간**: 3-4시간
- **Phase 1**: 1-2일
- **Phase 2**: 1-2일
- **Phase 3**: 1-2일
- **Phase 4**: 1-2일
- **총 소요 시간**: 4-8일

## 실험 최적화 전략
1. **조기 종료**: 10 에포크 후 성능이 현재 모델에 못 미치면 중단
2. **병렬 실행**: GPU 메모리가 허용하는 범위에서 여러 실험 동시 실행
3. **점진적 접근**: 가장 유망한 결과부터 더 깊이 탐구
4. **하이브리드 조합**: 각 Phase의 최고 결과를 조합하여 최종 실험

## 위험 요소 및 대응
- **메모리 부족**: 배치 크기 또는 해상도 감소
- **훈련 불안정**: 학습률 감소 또는 정규화 강화
- **과적합**: 더 강한 정규화 또는 데이터 증강
- **성능 저하**: 이전 설정으로 복귀 후 미세 조정